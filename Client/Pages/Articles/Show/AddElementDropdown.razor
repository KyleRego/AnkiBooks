@using AnkiBooks.Models
@using AnkiBooks.Models.Enums

<div class="p-4">
    <Dropdown Split="true" class="@dropDownCssClass">
        <DropdownActionButton Color="ButtonColor.Primary">Add</DropdownActionButton>
        <DropdownToggleButton Color="ButtonColor.Primary" />
        <DropdownMenu>
            <DropdownItem Type="ButtonType.Button" @onclick="InsertNewHeadingForm">Heading</DropdownItem>
            <DropdownItem Type="ButtonType.Button">Paragraph</DropdownItem>
            <DropdownItem Type="ButtonType.Button">Quote</DropdownItem>
            <DropdownItem Type="ButtonType.Button" @onclick="InsertNewBasicNoteForm">Basic Note</DropdownItem>
        </DropdownMenu>
    </Dropdown>
</div>

@if (dropDownItemWasSelected)
{
    @switch (dropDownItemSelected)
    {
        case ElementType.Heading:
            <NewHeading />
            <AddElementDropdown Article="@Article"/>
            break;

        case ElementType.BasicNote:
            <NewBasicNote Article="@Article" />
            <AddElementDropdown Article="@Article" />
            break;

        default:
            break;

    }
}

@code {
    [Parameter]
    public Article? Article { get; set; }

    private string dropDownCssClass = "";

    private bool dropDownItemWasSelected = false;

    private ElementType? dropDownItemSelected = null;

    private void InsertNewHeadingForm()
    {
        dropDownItemSelected = ElementType.Heading;
        ReplaceDropdown();
    }

    private void InsertNewBasicNoteForm()
    {
        dropDownItemSelected = ElementType.BasicNote;
        ReplaceDropdown();
    }

    private void ReplaceDropdown()
    {
        dropDownCssClass = "d-none";
        dropDownItemWasSelected = true;
    }
}