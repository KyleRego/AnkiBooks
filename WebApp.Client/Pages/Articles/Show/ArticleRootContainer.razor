@page "/articles/{id}"
@layout MainLayout
@using AnkiBooks.WebApp.Client.Shared.Heroicons

<div class="d-flex h-100">
    <div class="p-4 border-right-primary @(ShowArticleTree == true ? "" : "d-none")"
                style="min-width: 200px;">
        <div class="d-flex justify-content-center">
            <div class="w-6 h-6 mb-4" role="button" @onclick="ToggleArticlesTree">
                <BookOpen />
            </div>
        </div>
        
        <ArticlesTree />
        
    </div>
    <div class="">
        <div class="w-100 p-4 d-flex justify-content-between align-items-center">
            <div class="@(ShowArticleTree == true ? "visibility-hidden" : "")">
                <div class="w-6 h-6" role="button" @onclick="ToggleArticlesTree">
                    <BookOpen />
                </div>
            </div>

            @if (ReadMode == false)
            {
                <span role="button" @onclick="StartReadMode">Read mode</span>
            }
            else
            {
                <span role="button" @onclick="EndReadMode">Edit mode</span>
            }
        </div>
        <CascadingValue Value="@ReadMode" Name="ReadMode">
            <ArticleRoot Id="@Id" />
        </CascadingValue>
    </div>
</div>

@code {
    [Parameter]
    public string? Id { get; set; }

    public bool ReadMode { get; set; } = false;

    private void StartReadMode()
    {
        ReadMode = true;
    }

    private void EndReadMode()
    {
        ReadMode = false;
    }

    private bool ShowArticleTree = true;

    private void ToggleArticlesTree()
    {
        ShowArticleTree = !ShowArticleTree;
    }
}
