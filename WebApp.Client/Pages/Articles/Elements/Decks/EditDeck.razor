@using System.ComponentModel.DataAnnotations
@using System.Text.Json

@using AnkiBooks.ApplicationCore.Entities
@using AnkiBooks.ApplicationCore.Enums
@using AnkiBooks.ApplicationCore.Interfaces
@using AnkiBooks.ApplicationCore.Services

@inherits EditArticleElementBase<Deck>

@inject IDeckService DeckService

<DeckForm   InitialArticleElement="@InitialArticleElement"
            EditingExisting="true"
            ParentSubmitMethod="@SubmitForm" />

@code {
    private async Task SubmitForm(Deck editedDeck)
    {
        Deck? updatedDeck = await DeckService.PutDeck(editedDeck);
        ArgumentNullException.ThrowIfNull(updatedDeck);

        Editing = false;
        await EditingChanged.InvokeAsync(Editing);
    }
}