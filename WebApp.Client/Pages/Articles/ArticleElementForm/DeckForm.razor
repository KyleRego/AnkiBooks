@using AnkiBooks.ApplicationCore.Entities

<EditForm Model="Deck" OnValidSubmit="SubmitForm">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="d-flex flex-row justify-content-start">
        <InputText @bind-Value="@Deck.Description" />

        <button type="submit" class="ml-2">
            Submit
        </button>
    </div>
</EditForm>

@code {
    [Parameter]
    public Deck StartingDeck { get; set; } = null!;

    protected override void OnInitialized()
    {
        Deck = StartingDeck;
    }

    [Parameter]
    public bool EditingExisting { get; set; }

    private string SubmitButtonText()
    {
        return EditingExisting ? "Update" : "Create";
    }

    [Parameter]
    public Func<Deck, Task> ParentSubmitMethod { get; set; } = null!;

    private async Task SubmitForm()
    {
        await ParentSubmitMethod.Invoke(Deck);
    }

    [SupplyParameterFromForm]
    public Deck Deck { get; set; } = null!;
}