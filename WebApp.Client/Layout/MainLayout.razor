@inherits LayoutComponentBase

<div class="d-flex flex-column min-vh-100">
    <header class="site-header">

        <span role="button" @onclick="ExpandSidebar">
            <RadzenIcon Icon="menu" />
        </span>

        <div class="d-flex align-items-center">
            <AuthorizeView>
                <Authorized>
                    <a href="Account/Manage">@context.User.Identity?.Name</a>

                    <span>
                        <form action="Account/Logout" method="post">
                            <AntiforgeryToken />
                            <input type="hidden" name="ReturnUrl" value="/" />
                            <button type="submit" class="nav-link">Logout</button>
                        </form>
                    </span>
                </Authorized>
                <NotAuthorized>
                    <a href="Account/Register" class="me-4">Register</a>

                    <a href="Account/Login">Login</a>
                </NotAuthorized>
            </AuthorizeView>
        </div>
    </header>

    <div class="ankibooks-app-sidebar @(sidebarExpanded == true ? "fade-in" :
                                        (sidebarCollapsed == true) ? "fade-out" : "")">
        <nav class="bg-dark h-100 flex-grow-1 
                    d-flex flex-column">
            <a class="d-block p-2">
                Anki Books
            </a>

        </nav>
        <span role="button" @onclick="CollapseSidebar" class="ms-4 mt-4">
            <RadzenIcon Icon="close" />
        </span>
    </div>

    @if (sidebarExpanded)
    {
    <div class="rz-dialog-mask" style="position: absolute; z-index: 2"></div>
    }


    @Body

</div>

<RadzenComponents />

@code {
    bool sidebarExpanded = false;
    bool sidebarCollapsed = false;

    private void ExpandSidebar()
    {
        sidebarExpanded = true;
        sidebarCollapsed = false;
    }

    private void CollapseSidebar()
    {
        sidebarExpanded = false;
        sidebarCollapsed = true;
    }
}